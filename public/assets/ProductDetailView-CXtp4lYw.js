import{_ as V,n as L,u as N,k as S,c as o,b as e,i as T,g as _,h as A,a as d,t as l,F as f,l as g,e as B,d as u,p as D,m as M,r as i,q as E,s as $,x as I,o as r,w as R,y as j}from"./index-Dn0hYYMP.js";import{T as q}from"./ToastNotification-C6JxJPdt.js";const O="/images/icons/fast-buy.png",U={class:"product-page-main"},z={key:0,class:"text-center py-12 text-white"},G={key:1,class:"product-page-container"},H={class:"product-detail"},J={class:"product-image"},K=["src","alt"],Q={key:0,class:"edit-container",style:{"margin-top":"1rem","text-align":"center"}},W={class:"product-info"},X={class:"price"},Y={key:0,class:"old-price"},Z={class:"current-price"},tt={class:"description"},et={key:0,class:"platform-selector"},st={class:"platforms-grid"},at=["value"],ot={class:"platform-badge"},rt=["src","alt"],nt={class:"product-actions"},lt={class:"comments-section"},it={key:0,class:"text-gray-400"},ct={class:"comment-header"},dt={class:"rating"},ut={key:2,class:"text-center py-12 text-white"},pt={__name:"ProductDetailView",setup(mt){const h=I(),t=i(null),p=i(!0),y=L(),x=N(),c=i("steam"),m=i(null),v=i("Producto añadido al carrito"),b=async()=>{try{const s=await M.get(`/products/${h.params.id}`);t.value=s.data.data}catch(s){console.error("Error fetching product:",s)}finally{p.value=!1}};S(async()=>{await b(),t.value&&t.value.platforms&&t.value.platforms.length>0&&(c.value=t.value.platforms[0].name.toLowerCase())});const w=$(()=>{var s;return t.value&&t.value.offer_percentage>0?(t.value.price*(1-t.value.offer_percentage/100)).toFixed(2):parseFloat((s=t.value)==null?void 0:s.price).toFixed(2)}),k=s=>(s=s.toLowerCase(),s.includes("xbox")?"xbox":s.includes("ps")||s.includes("playstation")?"ps":s.includes("switch")||s.includes("nintendo")?"switch":s.includes("steam")?"steam":"pc"),C=()=>{if(!t.value)return;const s=t.value.platforms.find(a=>a.name.toLowerCase()===c.value);y.addToCart(t.value,s),v.value="Producto añadido al carrito",m.value.show()};return(s,a)=>{const P=E("router-link");return r(),o("div",U,[p.value?(r(),o("div",z,"Loading...")):t.value?(r(),o("div",G,[e("div",H,[e("div",J,[e("img",{src:t.value.image_url,alt:t.value.name},null,8,K),T(x).isAdmin?(r(),o("div",Q,[_(P,{to:`/products/${t.value.id}/edit`,class:"btn-secondary",style:{display:"inline-block",padding:"0.5rem 1rem",background:"#666",color:"white","text-decoration":"none","border-radius":"5px"}},{default:A(()=>[...a[1]||(a[1]=[u(" Editar Producto ",-1)])]),_:1},8,["to"])])):d("",!0)]),e("div",W,[e("h1",null,l(t.value.name),1),e("div",X,[t.value.offer_percentage>0?(r(),o("span",Y,l(parseFloat(t.value.price).toFixed(2))+"€",1)):d("",!0),e("span",Z,l(w.value)+"€",1)]),e("div",tt,l(t.value.description),1),t.value.platforms&&t.value.platforms.length>0?(r(),o("div",et,[a[2]||(a[2]=e("span",{class:"selector-label"},"Plataforma:",-1)),e("div",st,[(r(!0),o(f,null,g(t.value.platforms,n=>(r(),o("label",{key:n.id,class:"platform-option"},[R(e("input",{type:"radio",value:n.name.toLowerCase(),"onUpdate:modelValue":a[0]||(a[0]=F=>c.value=F)},null,8,at),[[j,c.value]]),e("span",ot,[e("img",{src:`/images/icons/${k(n.name)}.png`,alt:n.name},null,8,rt),u(" "+l(n.name),1)])]))),128))])])):d("",!0),e("div",nt,[e("form",{onSubmit:B(C,["prevent"])},[...a[3]||(a[3]=[e("button",{type:"submit",class:"btn-add-cart"},[u(" Añadir al carrito "),e("img",{src:D,alt:"Cart"})],-1)])],32),a[4]||(a[4]=e("button",{class:"btn-fast-buy",title:"Comprar ahora"},[e("img",{src:O,alt:"Fast Buy"})],-1))])])]),e("div",lt,[a[5]||(a[5]=e("h2",null,"Comentarios",-1)),!t.value.comments||t.value.comments.length===0?(r(),o("p",it,"No hay comentarios aún.")):d("",!0),(r(!0),o(f,null,g(t.value.comments,n=>(r(),o("div",{key:n.id,class:"comment-item"},[e("div",ct,[e("span",null,l(n.user.name),1),e("span",dt,"★ "+l(n.rating),1)]),e("p",null,l(n.content),1)]))),128))]),_(q,{ref_key:"toast",ref:m,message:v.value},null,8,["message"])])):(r(),o("div",ut,"Product not found."))])}}},ft=V(pt,[["__scopeId","data-v-423a9164"]]);export{ft as default};
